<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<IP DBVersion="V4.0" IPType="peripheral" IpGroup="Connectivity" Name="SPI" Version="spi2s1_v1_3_Cube" 
	xmlns:ns0="http://www.w3.org/2001/XMLSchema-instance"
	ns0:schemaLocation="http://mcd.rou.st.com/modules.php?name=mcu ../../../../../../../doc/V4/Development/Specifications/db/IP_Modes.xsd"
	xmlns="http://mcd.rou.st.com/modules.php?name=mcu">
  <About>SPI: Serial Peripheral Interface</About>
	
	<!-- Generic RefParameters for SPI --> 
	<RefParameter Name="Instance" DefaultValue="SPI$Index" Comment="Instance" Type="" Visible="false"/>
	
	<!-- Virtual Mode Parameter, to define RefParameter in function of NSS -->
	<RefParameter Comment="" DefaultValue="VM_NSSSOFT" Name="VirtualNSS" Type="list" Group="Basic Parameters" Visible="false">
		<PossibleValue Comment="" Value="VM_NSSSOFT"/>
		<PossibleValue Comment="" Value="VM_NSSHARD"/>
	</RefParameter>
	
	<!-- Virtual Type Parameter, to define RefParameter in function of Master/Slave -->
	<RefParameter Comment="" DefaultValue="VM_MASTER" Name="VirtualType" Type="list" Group="Basic Parameters" Visible="false">
		<PossibleValue Comment="" Value="VM_MASTER"/>
		<PossibleValue Comment="" Value="VM_SLAVE"/>
	</RefParameter>
	
	<RefParameter Comment="Mode" DefaultValue="SPI_MODE_SLAVE" Name="Mode" Type="list" Group="Basic Parameters" Visible="false">
		<PossibleValue Comment="Slave" Value="SPI_MODE_SLAVE"/>
		<PossibleValue Comment="Master" Value="SPI_MODE_MASTER"/>
	</RefParameter>
	
	<!--
	<RefParameter Comment="Bidirectional Mode" DefaultValue="SPI_BIDIRECTIONAL_DISABLED" Name="BidirectionalMode" Type="list" Group="Basic Parameters" Visible="false">
		<PossibleValue Comment="Disabled" Value="SPI_BIDIRECTIONAL_DISABLED"/>
		<PossibleValue Comment="Enabled" Value="SPI_BIDIRECTIONAL_ENABLED"/>
	</RefParameter>
	-->
	
	<RefParameter Comment="Direction" DefaultValue="SPI_DIRECTION_2LINES" Name="Direction" Type="list" Group="Basic Parameters" Visible="false">
		<PossibleValue Comment="2 Lines Unidirectionnal" Value="SPI_DIRECTION_2LINES"/>
		<PossibleValue Comment="2 Lines with Receive only" Value="SPI_DIRECTION_2LINES_RXONLY"/>
		<PossibleValue Comment="1 Line Bidirectionnal" Value="SPI_DIRECTION_1LINE"/>
	</RefParameter>
	
	<RefParameter Comment="Frame Format" DefaultValue="SPI_TIMODE_DISABLED" Name="TIMode" Type="list" Group="Basic Parameters">
		<PossibleValue Comment="Motorola" Value="SPI_TIMODE_DISABLED"/>
	</RefParameter>
	
	<RefParameter Comment="Data Size" DefaultValue="SPI_DATASIZE_8BIT" Name="DataSize" Type="list" Group="Basic Parameters">
		<PossibleValue Comment="8 Bits" Value="SPI_DATASIZE_8BIT" Semaphore="$IpInstance_DATASIZE_BYTE"/>
		<PossibleValue Comment="16 Bits" Value="SPI_DATASIZE_16BIT" Semaphore="$IpInstance_DATASIZE_HALFWORD"/>
	</RefParameter>
	
	<RefParameter Comment="First Bit" DefaultValue="SPI_FIRSTBIT_MSB" Name="FirstBit" Type="list" Group="Basic Parameters">
		<Condition Expression="TIMode = SPI_TIMODE_DISABLED" Diagnostic=""/>
		<PossibleValue Comment="MSB First" Value="SPI_FIRSTBIT_MSB"/>
		<PossibleValue Comment="LSB First" Value="SPI_FIRSTBIT_LSB"/>
	</RefParameter>
	<RefParameter Comment="First Bit" DefaultValue="null" Min="0" Max="1" Name="FirstBit" Type="integer" Group="Basic Parameters" Visible="false"/>
	
	<!-- Clock RefParameters for SPI --> 
	<RefParameter Comment="Prescaler (for Baud Rate)" DefaultValue="SPI_BAUDRATEPRESCALER_2" Name="BaudRatePrescaler" Type="list" Group="Clock Parameters">
		<PossibleValue Comment="2" Value="SPI_BAUDRATEPRESCALER_2"/>
		<PossibleValue Comment="4" Value="SPI_BAUDRATEPRESCALER_4"/>
		<PossibleValue Comment="8" Value="SPI_BAUDRATEPRESCALER_8"/>
		<PossibleValue Comment="16" Value="SPI_BAUDRATEPRESCALER_16"/>
		<PossibleValue Comment="32" Value="SPI_BAUDRATEPRESCALER_32"/>
		<PossibleValue Comment="64" Value="SPI_BAUDRATEPRESCALER_64"/>
		<PossibleValue Comment="128" Value="SPI_BAUDRATEPRESCALER_128"/>
		<PossibleValue Comment="256" Value="SPI_BAUDRATEPRESCALER_256"/>
	</RefParameter>
	
	<RefParameter Comment="Baud Rate" DefaultValue="8000000" Name="CalculateBaudRate" Min="0" Max="16000000" Type="string" Group="Clock Parameters" >
		<Description>Calculated Baudrate value based on SPI Clock source and Prescaler</Description>
	</RefParameter>
		
	<RefParameter Comment="Clock Polarity (CPOL)" DefaultValue="SPI_POLARITY_LOW" Name="CLKPolarity" Type="list" Group="Clock Parameters">
		<Condition Expression="TIMode = SPI_TIMODE_DISABLED" Diagnostic=""/>
		<PossibleValue Comment="Low" Value="SPI_POLARITY_LOW"/>
		<PossibleValue Comment="High" Value="SPI_POLARITY_HIGH"/>
	</RefParameter>
	<RefParameter Comment="Clock Polarity" DefaultValue="null" Min="0" Max="1" Name="CLKPolarity" Type="integer" Group="Clock Parameters" Visible="false" />
	
	<RefParameter Comment="Clock Phase (CPHA)" DefaultValue="SPI_PHASE_1EDGE" Name="CLKPhase" Type="list" Group="Clock Parameters">
		<Condition Expression="TIMode = SPI_TIMODE_DISABLED" Diagnostic=""/>
		<PossibleValue Comment="1 Edge" Value="SPI_PHASE_1EDGE"/>
		<PossibleValue Comment="2 Edge" Value="SPI_PHASE_2EDGE"/>
	</RefParameter>
	<RefParameter Comment="Clock Phase" DefaultValue="null" Min="0" Max="1" Name="CLKPhase" Type="integer" Group="Clock Parameters" Visible="false"/>
		
	
	<!-- Advanced RefParameters for SPI --> 
	<RefParameter Comment="CRC Calculation" DefaultValue="SPI_CRCCALCULATION_DISABLED" Name="CRCCalculation" Type="list" Group="Advanced Parameters">
		<PossibleValue Comment="Disabled" Value="SPI_CRCCALCULATION_DISABLED"/>
		<PossibleValue Comment="Enabled" Value="SPI_CRCCALCULATION_ENABLED"/>
	</RefParameter>
	
	<RefParameter Comment="CRC Polynomial" DefaultValue="X1+X3" Max="8" Name="CRCPolynomial" Type="polynomial" Group="Advanced Parameters">
		<Condition Expression="(CRCCalculation = SPI_CRCCALCULATION_ENABLED) &amp; (DataSize = SPI_DATASIZE_8BIT)" Diagnostic=""/>
	</RefParameter>
	<RefParameter Comment="CRC Polynomial" DefaultValue="X1+X3" Max="16" Name="CRCPolynomial" Type="polynomial" Group="Advanced Parameters">
		<Condition Expression="(CRCCalculation = SPI_CRCCALCULATION_ENABLED) &amp; (DataSize = SPI_DATASIZE_16BIT)" Diagnostic=""/>
	</RefParameter>
	<RefParameter Comment="CRC Polynomial" DefaultValue="10"  Name="CRCPolynomial" Type="list" Group="Advanced Parameters" Visible="false">
            <PossibleValue Comment="X1+X3" Value="10"/>
        </RefParameter>
		
	<RefParameter Comment="NSS Signal Type" DefaultValue="SPI_NSS_HARD_OUTPUT" Name="NSS" Type="list" Group="Advanced Parameters">
		<Condition Expression="$IpInstance_NSSHARD_Output" Diagnostic=""/>
		<PossibleValue Comment="Output Hardware" Value="SPI_NSS_HARD_OUTPUT"/>
	</RefParameter>
	<RefParameter Comment="NSS Signal Type" DefaultValue="SPI_NSS_HARD_INPUT" Name="NSS" Type="list" Group="Advanced Parameters">
		<Condition Expression="$IpInstance_NSSHARD_Input" Diagnostic=""/>
		<PossibleValue Comment="Input Hardware" Value="SPI_NSS_HARD_INPUT"/>
	</RefParameter>
        <RefParameter Comment="NSS Signal Type" DefaultValue="SPI_NSS_SOFT" Name="NSS" Type="list" Group="Advanced Parameters">
		<PossibleValue Comment="Software" Value="SPI_NSS_SOFT"/>
	</RefParameter>
	<RefParameter Comment="NSS Signal Type" DefaultValue="SPI_NSS_SOFT" Name="NSS" Type="list" Group="Advanced Parameters" Visible="false">
            <PossibleValue Comment="Software" Value="SPI_NSS_SOFT"/>
    </RefParameter>
	
	
	<!-- RefModes for Hardware NSS -->
	<RefMode Name="NSS_Signal_Hard_Input" HalMode="SPI">
		<Parameter Name="VirtualNSS">
			<PossibleValue>VM_NSSHARD</PossibleValue>
		</Parameter>
	</RefMode>
        <RefMode Name="NSS_Signal_Hard_Output" HalMode="SPI">
		<Parameter Name="VirtualNSS">
			<PossibleValue>VM_NSSHARD</PossibleValue>
		</Parameter>
	</RefMode>
	
	
	<!-- RefModes for 'Full-Duplex Master' SPI -->
	<RefMode Name="Full_Duplex_Master">
		<ConfigForMode>Spi_Init</ConfigForMode>
		<!-- Selected Mode Fixed Parameters -->
		<Parameter Name="VirtualType">
			<PossibleValue>VM_MASTER</PossibleValue>
		</Parameter>
		<Parameter Name="Mode">
			<PossibleValue>SPI_MODE_MASTER</PossibleValue>
		</Parameter>
		<Parameter Name="Direction">
			<PossibleValue>SPI_DIRECTION_2LINES</PossibleValue>
		</Parameter>
		<!-- Selected Mode User Generic Parameters -->
		<Parameter Name="TIMode"/>
		<Parameter Name="DataSize"/>
		<Parameter Name="FirstBit"/>
		<!-- Selected Mode User Clock Parameters -->
		<Parameter Name="BaudRatePrescaler"/>
		<Parameter Name="CalculateBaudRate"/>
		<Parameter Name="CLKPolarity"/>
		<Parameter Name="CLKPhase"/>
		<!-- Selected Mode User Advanced Parameters -->
		<Parameter Name="CRCCalculation"/>
		<Parameter Name="CRCPolynomial"/>
		<Parameter Name="NSS"/>
	</RefMode>
	
	<!-- RefModes for 'Full-Duplex Slave' SPI -->
	<RefMode Name="Full_Duplex_Slave">
		<ConfigForMode>Spi_Init</ConfigForMode>
		<!-- Selected Mode Fixed Parameters -->
		<Parameter Name="VirtualType">
			<PossibleValue>VM_SLAVE</PossibleValue>
		</Parameter>
		<Parameter Name="Mode">
			<PossibleValue>SPI_MODE_SLAVE</PossibleValue>
		</Parameter>
		<Parameter Name="Direction">
			<PossibleValue>SPI_DIRECTION_2LINES</PossibleValue>
		</Parameter>
		<!-- Selected Mode User Generic Parameters -->
		<Parameter Name="TIMode"/>
		<Parameter Name="DataSize"/>
		<Parameter Name="FirstBit"/>
		<!-- Selected Mode User Clock Parameters -->
		<Parameter Name="BaudRatePrescaler"/>
		<Parameter Name="CalculateBaudRate"/>
		<Parameter Name="CLKPolarity"/>
		<Parameter Name="CLKPhase"/>
		<!-- Selected Mode User Advanced Parameters -->
		<Parameter Name="CRCCalculation"/>
		<Parameter Name="CRCPolynomial"/>
		<Parameter Name="NSS"/>
	</RefMode>
	
	<!-- RefModes for 'Half-Duplex Master' SPI -->
	<RefMode Name="Simplex_Bidirectional_Master">
		<ConfigForMode>Spi_Init</ConfigForMode>
		<!-- Selected Mode Fixed Parameters -->
		<Parameter Name="VirtualType">
			<PossibleValue>VM_MASTER</PossibleValue>
		</Parameter>
		<Parameter Name="Mode">
			<PossibleValue>SPI_MODE_MASTER</PossibleValue>
		</Parameter>
		<Parameter Name="Direction">
			<PossibleValue>SPI_DIRECTION_1LINE</PossibleValue>
		</Parameter>
		<!-- Selected Mode User Generic Parameters -->
		<Parameter Name="TIMode"/>
		<Parameter Name="DataSize"/>
		<Parameter Name="FirstBit"/>
		<!-- Selected Mode User Clock Parameters -->
		<Parameter Name="BaudRatePrescaler"/>
		<Parameter Name="CalculateBaudRate"/>
		<Parameter Name="CLKPolarity"/>
		<Parameter Name="CLKPhase"/>
		<!-- Selected Mode User Advanced Parameters -->
		<Parameter Name="CRCCalculation"/>
		<Parameter Name="CRCPolynomial"/>
		<Parameter Name="NSS"/>
	</RefMode>
	
	<!-- RefModes for 'Half-Duplex Slave' SPI -->
	<RefMode Name="Simplex_Bidirectional_Slave">
		<ConfigForMode>Spi_Init</ConfigForMode>
		<!-- Selected Mode Fixed Parameters -->
		<Parameter Name="VirtualType">
			<PossibleValue>VM_SLAVE</PossibleValue>
		</Parameter>
		<Parameter Name="Mode">
			<PossibleValue>SPI_MODE_SLAVE</PossibleValue>
		</Parameter>
		<Parameter Name="Direction">
			<PossibleValue>SPI_DIRECTION_1LINE</PossibleValue>
		</Parameter>
		<!-- Selected Mode User Generic Parameters -->
		<Parameter Name="TIMode"/>
		<Parameter Name="DataSize"/>
		<Parameter Name="FirstBit"/>
		<!-- Selected Mode User Clock Parameters -->
		<Parameter Name="BaudRatePrescaler"/>
		<Parameter Name="CalculateBaudRate"/>
		<Parameter Name="CLKPolarity"/>
		<Parameter Name="CLKPhase"/>
		<!-- Selected Mode User Advanced Parameters -->
		<Parameter Name="CRCCalculation"/>
		<Parameter Name="CRCPolynomial"/>
		<Parameter Name="NSS"/>
	</RefMode>
	
	<!-- RefModes for 'Receive Only Master' SPI -->
	<RefMode Name="RX_Only_Simplex_Unidirect_Master">
		<ConfigForMode>Spi_Init</ConfigForMode>
		<!-- Selected Mode Fixed Parameters -->
		<Parameter Name="VirtualType">
			<PossibleValue>VM_MASTER</PossibleValue>
		</Parameter>
		<Parameter Name="Mode">
			<PossibleValue>SPI_MODE_MASTER</PossibleValue>
		</Parameter>
		<Parameter Name="Direction">
			<PossibleValue>SPI_DIRECTION_2LINES_RXONLY</PossibleValue>
		</Parameter>
		<!-- Selected Mode User Generic Parameters -->
		<Parameter Name="TIMode"/>
		<Parameter Name="DataSize"/>
		<Parameter Name="FirstBit"/>
		<!-- Selected Mode User Clock Parameters -->
		<Parameter Name="BaudRatePrescaler"/>
		<Parameter Name="CalculateBaudRate"/>
		<Parameter Name="CLKPolarity"/>
		<Parameter Name="CLKPhase"/>
		<!-- Selected Mode User Advanced Parameters -->
		<Parameter Name="CRCCalculation"/>
		<Parameter Name="CRCPolynomial"/>
		<Parameter Name="NSS"/>
	</RefMode>
	
	<!-- RefModes for 'Receive Only Slave' SPI -->
	<RefMode Name="RX_Only_Simplex_Unidirect_Slave">
		<ConfigForMode>Spi_Init</ConfigForMode>
		<!-- Selected Mode Fixed Parameters -->
		<Parameter Name="VirtualType">
			<PossibleValue>VM_SLAVE</PossibleValue>
		</Parameter>
		<Parameter Name="Mode">
			<PossibleValue>SPI_MODE_SLAVE</PossibleValue>
		</Parameter>
		<Parameter Name="Direction">
			<PossibleValue>SPI_DIRECTION_2LINES_RXONLY</PossibleValue>
		</Parameter>
		<!-- Selected Mode User Generic Parameters -->
		<Parameter Name="TIMode"/>
		<Parameter Name="DataSize"/>
		<Parameter Name="FirstBit"/>
		<!-- Selected Mode User Clock Parameters -->
		<Parameter Name="BaudRatePrescaler"/>
		<Parameter Name="CalculateBaudRate"/>
		<Parameter Name="CLKPolarity"/>
		<Parameter Name="CLKPhase"/>
		<!-- Selected Mode User Advanced Parameters -->
		<Parameter Name="CRCCalculation"/>
		<Parameter Name="CRCPolynomial"/>
		<Parameter Name="NSS"/>
	</RefMode>
	
	<!-- RefModes for 'Transmit Only Master' SPI -->
	<RefMode Name="TX_Only_Simplex_Unidirect_Master">
		<ConfigForMode>Spi_Init</ConfigForMode>
		<!-- Selected Mode Fixed Parameters -->
		<Parameter Name="VirtualType">
			<PossibleValue>VM_MASTER</PossibleValue>
		</Parameter>
		<Parameter Name="Mode">
			<PossibleValue>SPI_MODE_MASTER</PossibleValue>
		</Parameter>
		<Parameter Name="Direction">
			<PossibleValue>SPI_DIRECTION_2LINES</PossibleValue>
		</Parameter>
		<!-- Selected Mode User Generic Parameters -->
		<Parameter Name="TIMode"/>
		<Parameter Name="DataSize"/>
		<Parameter Name="FirstBit"/>
		<!-- Selected Mode User Clock Parameters -->
		<Parameter Name="BaudRatePrescaler"/>
		<Parameter Name="CalculateBaudRate"/>
		<Parameter Name="CLKPolarity"/>
		<Parameter Name="CLKPhase"/>
		<!-- Selected Mode User Advanced Parameters -->
		<Parameter Name="CRCCalculation"/>
		<Parameter Name="CRCPolynomial"/>
		<Parameter Name="NSS"/>
	</RefMode>
	
	<!-- RefModes for 'Transmit Only Slave' SPI -->
	<RefMode Name="TX_Only_Simplex_Unidirect_Slave">
		<ConfigForMode>Spi_Init</ConfigForMode>
		<!-- Selected Mode Fixed Parameters -->
		<Parameter Name="VirtualType">
			<PossibleValue>VM_SLAVE</PossibleValue>
		</Parameter>
		<Parameter Name="Mode">
			<PossibleValue>SPI_MODE_SLAVE</PossibleValue>
		</Parameter>
		<Parameter Name="Direction">
			<PossibleValue>SPI_DIRECTION_2LINES</PossibleValue>
		</Parameter>
		<!-- Selected Mode User Generic Parameters -->
		<Parameter Name="TIMode"/>
		<Parameter Name="DataSize"/>
		<Parameter Name="FirstBit"/>
		<!-- Selected Mode User Clock Parameters -->
		<Parameter Name="BaudRatePrescaler"/>
		<Parameter Name="CalculateBaudRate"/>
		<Parameter Name="CLKPolarity"/>
		<Parameter Name="CLKPhase"/>
		<!-- Selected Mode User Advanced Parameters -->
		<Parameter Name="CRCCalculation"/>
		<Parameter Name="CRCPolynomial"/>
		<Parameter Name="NSS"/>
	</RefMode>
	
	
	
	<!-- ModeLogicOperator for SPI -->
	<ModeLogicOperator Name="OR">
		<Mode Name="Mode">
            <ModeLogicOperator Name="XOR">
				<Mode Name="Full_Duplex_Master" UserName="Full-Duplex Master">
					<SignalLogicalOp Name="AND">
						<Signal Name="MISO"/>
						<Signal Name="MOSI"/>
						<Signal Name="SCK"/>
					</SignalLogicalOp>
					<Semaphore>$IpInstance_DmaTransmit</Semaphore>
					<Semaphore>$IpInstance_DmaReceive</Semaphore>
					<Semaphore>$IpInstance_Master</Semaphore>				
				</Mode>
				<Mode Name="Full_Duplex_Slave" UserName="Full-Duplex Slave">
					<SignalLogicalOp Name="AND">
						<Signal Name="MISO"/>
						<Signal Name="MOSI"/>
						<Signal Name="SCK"/>
					</SignalLogicalOp>
					<Semaphore>$IpInstance_DmaTransmit</Semaphore>
					<Semaphore>$IpInstance_DmaReceive</Semaphore>
					<Semaphore>$IpInstance_Slave</Semaphore>	
				</Mode>
            	<Mode Name="Simplex_Bidirectional_Master" UserName="Half-Duplex Master">
					<SignalLogicalOp Name="AND">
						<Signal Name="MOSI"/>
						<Signal Name="SCK"/>
					</SignalLogicalOp>
            		<Semaphore>$IpInstance_DmaTransmit</Semaphore>
            		<Semaphore>$IpInstance_DmaReceive</Semaphore>
            		<Semaphore>$IpInstance_Master</Semaphore>          		
				</Mode>
            	<Mode Name="Simplex_Bidirectional_Slave" UserName="Half-Duplex Slave">
					<SignalLogicalOp Name="AND">
						<Signal Name="MISO"/>
						<Signal Name="SCK"/>
					</SignalLogicalOp>
            		<Semaphore>$IpInstance_DmaTransmit</Semaphore>
            		<Semaphore>$IpInstance_DmaReceive</Semaphore>
				</Mode>
            	<Mode Name="RX_Only_Simplex_Unidirect_Master" UserName="Receive Only Master">
            		<!-- SPI is in 'Full-Duplex' Mode, but only 'Master In' line is on pinout -->
					<SignalLogicalOp Name="AND">
						<Signal Name="MISO"/> 	 
						<Signal Name="SCK"/>
					</SignalLogicalOp>
            		<Semaphore>$IpInstance_DmaReceive</Semaphore>
            		<Semaphore>$IpInstance_Master</Semaphore>
				</Mode>
            	<Mode Name="RX_Only_Simplex_Unidirect_Slave" UserName="Receive Only Slave">
            		<!-- SPI is in 'Full-Duplex' Mode, but only 'Slave In' line is on pinout -->
					<SignalLogicalOp Name="AND">
						<Signal Name="MOSI"/>	
						<Signal Name="SCK"/>
					</SignalLogicalOp>
            		<Semaphore>$IpInstance_DmaReceive</Semaphore>
				</Mode>
            	<Mode Name="TX_Only_Simplex_Unidirect_Master" UserName="Transmit Only Master">
            		<!-- SPI is in 'Full-Duplex' Mode, but only 'Master Out' line is on pinout -->
					<SignalLogicalOp Name="AND">
						<Signal Name="MOSI"/>
						<Signal Name="SCK"/>
					</SignalLogicalOp>
            		<Semaphore>$IpInstance_DmaTransmit</Semaphore>
            		<Semaphore>$IpInstance_Master</Semaphore>
				</Mode>
            	<Mode Name="TX_Only_Simplex_Unidirect_Slave" UserName="Transmit Only Slave">
            		<!-- SPI is in 'Full-Duplex' Mode, but only 'Slave Out' line is on pinout -->
					<SignalLogicalOp Name="AND">
						<Signal Name="MISO"/>
						<Signal Name="SCK"/>
					</SignalLogicalOp>
            		<Semaphore>$IpInstance_DmaTransmit</Semaphore>
					<Semaphore>$IpInstance_Slave</Semaphore>
					<Semaphore>$IpInstance_Transmit</Semaphore>
				</Mode>
			</ModeLogicOperator>
			<Semaphore>$IpInstance</Semaphore>
			<Condition Expression="!I2S$IpNumber" Diagnostic="I2S$IpNumber must be disabled"/>
		</Mode>
		
		<Mode Name="NSS_Signal" UserName="Hardware NSS Signal">
			<ModeLogicOperator Name="XOR">
				<Mode Name="NSS_Signal_Hard_Input" UserName="Hardware NSS Input Signal">
					<SignalLogicalOp Name="AND">
						<Signal Name="NSS" IOMode="Input"/>
					</SignalLogicalOp>
                    <Semaphore>$IpInstance_NSSHARD_Input</Semaphore>
				</Mode>
			
				<Mode Name="NSS_Signal_Hard_Output" UserName="Hardware NSS Output Signal">
					<SignalLogicalOp Name="AND">
						<Signal Name="NSS"/>
					</SignalLogicalOp>
                    <Semaphore>$IpInstance_NSSHARD_Output</Semaphore>
                    <Condition Expression="$IpInstance_Master" Diagnostic="$IpInstance must be in Master mode"/>
				</Mode>
			</ModeLogicOperator>
			<Condition Expression="$IpInstance" Diagnostic="$IpInstance must be have a valid Mode"/>
		</Mode>
	</ModeLogicOperator>
	
	<!-- RefSignal for SPI -->
	<RefSignal Name="MISO" IOMode="AlternateFunctionPushPull" />
	<RefSignal Name="MOSI" IOMode="AlternateFunctionPushPull" />
	<RefSignal Name="SCK" IOMode="AlternateFunctionPushPull" />
	<RefSignal Name="NSS" IOMode="AlternateFunctionPushPull" />
</IP>
